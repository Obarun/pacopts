#!/bin/bash
# This script is under license BEER-WARE
# "THE BEER-WARE LICENSE" (Revision 42):
# <eric@obarun.org> wrote this file.  As long as you retain this notice you
# can do whatever you want with this stuff. If we meet some day, and you think
# this stuff is worth it, you can buy me a beer in return.   Eric Vidal

shopt -s extglob

#set -e

##		Check is the functions file exits

if [[ -f /usr/lib/obarun/common_functions ]]; then
	source /usr/lib/obarun/common_functions
else
	echo "==>> Missing file : common_functions"
	exit	
fi

if [[ -f /usr/lib/obarun/pacopts_functions ]]; then
	source /usr/lib/obarun/pacopts_functions
else
	echo "==>> Missing file : pacopts_functions"
	exit	
fi


(( EUID == 0 )) || die " You must be run this script with root privileges"

if [[ -z "${2}" ]] && [[ "${1}" != @(origin|applytmp) ]]; then
	usage
	exit 1
fi


case "${1}" in
	origin)
		check_package
		;;
	applysys)
		parse_file "${sys_path}" "${2}"
		;;
	applytmp)
		tmpfiles
		;;
	*)
		usage
		exit 1
		;;
esac
exit 0

